# JavaAssurance

A comprehensive insurance management system built in Java for managing clients, advisors, contracts, and insurance incidents.

## ğŸ“‹ Table of Contents

- [Overview](#overview)
- [Features](#features)
- [Architecture](#architecture)
- [Database Schema](#database-schema)
- [Installation](#installation)
- [Usage](#usage)
- [Project Structure](#project-structure)
- [API Reference](#api-reference)
- [Contributing](#contributing)

## ğŸŒŸ Overview

JavaAssurance is a console-based insurance management application that provides a complete solution for insurance companies to manage their operations. The system handles the entire insurance workflow from client registration to incident reporting and claims management.

## âœ¨ Features

### ğŸ‘¥ Client Management
- Create new clients with personal information
- Search clients by ID
- Delete clients with confirmation
- View all clients ordered by family name
- Find clients with incidents above a specific cost threshold
- List all clients assigned to a specific advisor

### ğŸ‘¨â€ğŸ’¼ Advisor Management
- Create new advisors
- Search advisors by ID
- Delete advisors with confirmation
- View all clients assigned to a specific advisor

### ğŸ“„ Contract Management
- Create insurance contracts (Car, Property, Health)
- Search contracts by ID
- Delete contracts with confirmation
- View contracts by client
- Support for contract start/end dates

### ğŸš¨ Incident Management
- Report new incidents (Car Accident, Home Accident, Illness)
- Search incidents by ID with client details
- Delete incidents with confirmation
- View incidents by contract
- View incidents by client
- Display incidents in descending order of cost
- Show incidents that occurred before a specific date
- Calculate total incident costs for clients

## ğŸ—ï¸ Architecture

The application follows a layered MVC (Model-View-Controller) architecture:

### **Models Layer**
- **Abstract Classes**: `Model` (base database operations), `Person` (shared person attributes)
- **Entities**: `Client`, `Advisor`, `Contract`, `Incident`
- **Enums**: `ContractType`, `IncidentType`

### **Services Layer**
- `ClientService`: Business logic for client operations
- `AdvisorService`: Business logic for advisor operations
- `ContractService`: Business logic for contract operations
- `IncidentService`: Business logic for incident operations

### **Views Layer**
- `View`: Abstract base class with input/output utilities
- `ClientView`: Client management interface
- `AdvisorView`: Advisor management interface
- `ContractView`: Contract management interface
- `IncidentView`: Incident management interface

### **Database Layer**
- `DB`: Singleton database connection manager
- PostgreSQL database with connection pooling

## ğŸ—„ï¸ Database Schema

The system uses PostgreSQL with the following main tables:

### **advisors**
```sql
- id (PRIMARY KEY)
- first_name
- last_name
- email
```

### **clients**
```sql
- id (PRIMARY KEY)
- first_name
- last_name
- email
- advisor_id (FOREIGN KEY â†’ advisors.id)
```

### **contracts**
```sql
- id (PRIMARY KEY)
- type (CAR, PROPERTY, HEALTH)
- start_date
- end_date
- client_id (FOREIGN KEY â†’ clients.id)
```

### **incidents**
```sql
- id (PRIMARY KEY)
- type (CAR_ACCIDENT, HOME_ACCIDENT, ILLNESS)
- date
- description
- cost
- contract_id (FOREIGN KEY â†’ contracts.id)
```

## ğŸš€ Installation

### Prerequisites
- Java 8 or higher
- PostgreSQL database
- JDBC PostgreSQL driver

### Database Setup
1. Install and start PostgreSQL
2. Create a database named `mydb`
3. Update database credentials in `DB.java`:
   ```java
   String url = "jdbc:postgresql://localhost:5433/mydb";
   String user = "myuser";
   String password = "mypassword";
   ```

### Running the Application
1. Clone the repository:
   ```bash
   git clone <repository-url>
   cd JavaAssurance
   ```

2. Compile the Java files:
   ```bash
   javac -cp ".:path/to/postgresql-driver.jar" src/**/*.java
   ```

3. Run the application:
   ```bash
   java -cp ".:path/to/postgresql-driver.jar:src" Main
   ```

## ğŸ’» Usage

Upon starting the application, you'll see the main menu:

```
=== Welcome to Javassurance ===

=== MAIN MENU ===
1. Manage Clients
2. Manage Contracts
3. Manage Incidents
4. Manage Advisors
5. Exit
```

### Example Workflows

**Adding a New Client:**
1. Select "1. Manage Clients"
2. Choose "1. Create Client"
3. Enter client details and select an advisor

**Reporting an Incident:**
1. Select "3. Manage Incidents"
2. Choose "1. Create Incident"
3. Select incident type, enter details, and choose a contract

**Finding High-Cost Incidents:**
1. Select "1. Manage Clients"
2. Choose "5. Show All Clients that have an incident cost larger than a specific cost"
3. Enter the cost threshold

## ğŸ“ Project Structure

```
JavaAssurance/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Main.java                     # Application entry point
â”‚   â”œâ”€â”€ Database/
â”‚   â”‚   â””â”€â”€ DB.java                   # Database connection manager
â”‚   â”œâ”€â”€ Models/
â”‚   â”‚   â”œâ”€â”€ Model.java                # Abstract base model
â”‚   â”‚   â”œâ”€â”€ Person.java               # Abstract person class
â”‚   â”‚   â”œâ”€â”€ Client.java               # Client entity
â”‚   â”‚   â”œâ”€â”€ Advisor.java              # Advisor entity
â”‚   â”‚   â”œâ”€â”€ Contract.java             # Contract entity
â”‚   â”‚   â””â”€â”€ Incident.java             # Incident entity
â”‚   â”œâ”€â”€ Services/
â”‚   â”‚   â”œâ”€â”€ ClientService.java        # Client business logic
â”‚   â”‚   â”œâ”€â”€ AdvisorService.java       # Advisor business logic
â”‚   â”‚   â”œâ”€â”€ ContractService.java      # Contract business logic
â”‚   â”‚   â””â”€â”€ IncidentService.java      # Incident business logic
â”‚   â”œâ”€â”€ Views/
â”‚   â”‚   â”œâ”€â”€ View.java                 # Abstract view class
â”‚   â”‚   â”œâ”€â”€ ClientView.java           # Client interface
â”‚   â”‚   â”œâ”€â”€ AdvisorView.java          # Advisor interface
â”‚   â”‚   â”œâ”€â”€ ContractView.java         # Contract interface
â”‚   â”‚   â””â”€â”€ IncidentView.java         # Incident interface
â”‚   â””â”€â”€ Enums/
â”‚       â”œâ”€â”€ ContractType.java         # Contract type enumeration
â”‚       â””â”€â”€ IncidentType.java         # Incident type enumeration
â””â”€â”€ README.md
```

## ğŸ“š API Reference

### Key Service Methods

#### ClientService
- `create(String firstName, String lastName, String email, Integer advisorId)`
- `findById(int id): Client`
- `deleteById(int id): boolean`
- `getAllOrderedByFamilyName(): List<Client>`
- `getClientsHaveIncidentsLargerThan(double threshold): List<Client>`
- `getClientsByAdvisorId(int advisorId): List<Client>`

#### AdvisorService
- `create(String firstName, String lastName, String email)`
- `findById(int id): Advisor`
- `deleteById(int id): boolean`

#### ContractService
- `create(ContractType type, LocalDate startDate, LocalDate endDate, Integer clientId)`
- `findById(int id): Contract`
- `deleteById(int id): boolean`
- `getAll(): List<Contract>`
- `getContractsByClientId(int clientId): List<Contract>`

#### IncidentService
- `create(IncidentType type, LocalDate date, String description, Integer cost, Integer contractId)`
- `findById(int id): Incident`
- `deleteById(int id): boolean`
- `getAll(): List<Incident>`

### Input Validation
- All numeric inputs are validated
- Date inputs follow YYYY-MM-DD format
- Required fields are checked before database operations
- Confirmation prompts for delete operations

## ğŸ”§ Technical Features

- **Singleton Pattern**: Database connection management
- **Abstract Factory Pattern**: Model and View hierarchies
- **Input Validation**: Comprehensive error handling for user inputs
- **SQL Injection Prevention**: Parameterized queries
- **Date Handling**: Java LocalDate for date operations
- **Optional Handling**: Safe null handling for optional fields
- **Stream API**: Modern Java collection processing

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/new-feature`)
3. Commit your changes (`git commit -am 'Add new feature'`)
4. Push to the branch (`git push origin feature/new-feature`)
5. Create a Pull Request

## ğŸ”® Future Enhancements

- Web-based interface
- REST API endpoints
- Report generation (PDF/Excel)
- Email notifications
- Audit logging
- Multi-language support
- Dashboard with analytics

---

**Built using Java and PostgreSQL**